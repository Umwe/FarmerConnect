@page
@model FarmerConnect.Pages.transactionhistoryModel
@{
}
<div class="btnlg">
    <button type="button" onclick="location.href='@Url.Page("/Agribusiness")'" class="btn btn-outline-success">Back</button>
</div>
<h1>Transaction History</h1>

<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th>Buyer ID</th>
            <th>Resource ID</th>
            <th>Service ID</th>
            <th>Quantity</th>
            <th>Total Amount</th>
            <th>Transaction Date</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var transaction in Model.Transactions)
        {
            <tr>
                <td>@transaction.buyer_id</td>
                <td>@transaction.resource_id</td>
                <td>@transaction.service_id</td>
                <td>@transaction.quantity</td>
                <td>@transaction.total_amount</td>
                <td>@transaction.transaction_date</td>
            </tr>
        }
    </tbody>
    <tfoot>
        <tr>
            <td colspan="4">Total Amount Of All Sold</td>
            <td id="totalAmount"></td>
            <td></td>
        </tr>
    </tfoot>
</table>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Get all the total_amount cells in the table
        var totalAmountCells = document.querySelectorAll("td:nth-child(5)");

        // Calculate the sum
        var sum = Array.from(totalAmountCells).reduce((acc, cell) => acc + parseFloat(cell.textContent), 0);

        // Update the totalAmount cell in the footer
        document.getElementById("totalAmount").textContent = "Total: " + sum.toFixed(2);
    });
</script>